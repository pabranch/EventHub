<html>
<head>
</head>
<body>
 <script src="http://yui.yahooapis.com/3.4.1/build/yui/yui-min.js"></script>
<script src="http://bidsilent.net:8888/socket.io/socket.io.js"></script>
<button id="but">THIS BLOWS</button>
<button id="fancy">THIS FANCY</button>
<script>
YUI().add('pulsate', function(Y) {
    Y.pulsate = function(node, delay) {
        node = Y.one(node);
        if (!node) { 
            throw new Error("Node " + node + " does not exist");
        }
        delay = delay || 500;
        Y.later(delay, node,
            function() {
                node.hide('fadeOut', {}, function() { node.show('fadeIn'); } ); 
            }, null, true);
    };
}, '1.0', { requires: [ 'node', 'transition' ] });
</script>
<div id="pulse">pulse off and on</div>
<script>
    YUI().add('hub', function(Y) {
        Y.Hub = function(url) {
            var _this   = this;
            this._fire  = this.fire;
            this.socket = io.connect(url);
            this.socket.on('connect', function () {
                _this.socket.$emit = function() { _this._fire.apply(_this, arguments); };
                _this._fire('eventHubReady');
                Y.Global.Hub = _this;
            });
            this.fire = function() {
                _this.socket.emit.apply(_this.socket, arguments);
            };
        };
        Y.augment(Y.Hub, Y.EventTarget);
    }, '1.0', { requires: [ 'event-custom' ] });
</script>
<script>
    YUI().use('node', 'hub', 'pulsate', function(Y) {
        //        var b = Y.one('#fancy'), 
        var n = Y.one('#pulse');


try {
        console.log(n.getStyle('opacity'));
        Y.pulsate('#pulse');
        console.log(n.getStyle('opacity'));
        console.log(n.getStyle('opacity'));
        }catch(e) {
        console.log(e);
    }

        var hub = new Y.Hub('http://bidsilent.net:8888');
        hub.on('eventHubReady', function() {
            Y.one('#but').on('click', function(event) { console.log('CLICK EVENT!!!'); hub.fire('click', { button: 'clicked' }, function(back, b2) { console.log( back); console.log(b2); } ); });
            hub.on('foobie', function(a) { console.log('FOOBIE'); a({ boo: 'ruelsz' }); });
            hub.on('click', function(o1, fn) { console.log('got local click event: ' + o1.button); });
        });
    });
</script>
</body>
</html>

